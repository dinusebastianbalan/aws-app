name: Repository Dispatch Trigger

on:
  repository_dispatch:
    types: [trigger-action]

jobs:
  dispatch_job:
    runs-on: ubuntu-latest
    outputs:
      environment: ${{ steps.set_vars.outputs.env }}
      tag: ${{ steps.set_vars.outputs.tag }}
    steps:
      - name: Echo the message from client_payload
        run: |
          echo "The env is ${{ github.event.client_payload.env }}"
          echo "The tag is ${{ github.event.client_payload.tag }}"
          echo "env=${{ github.event.client_payload.env }}" >> $GITHUB_ENV
          echo "tag=${{ github.event.client_payload.tag }}" >> $GITHUB_ENV
